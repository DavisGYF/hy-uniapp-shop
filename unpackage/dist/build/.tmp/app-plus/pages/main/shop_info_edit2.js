(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/shop_info_edit2"],{"056f":function(t,e,i){"use strict";i.r(e);var n=i("680f"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},"59f5":function(t,e,i){},"680f":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("f493"));function o(t){return t&&t.__esModule?t:{default:t}}i("7389");var a={components:{mpvueCityPicker:n.default},data:function(){return{show_flag:!0,steps:[{text:"基本信息",desc:""},{text:"店铺介绍",desc:""},{text:"证件上传",desc:""}],active:1,storeListAll:[],storeList:[],cat_index:0,array:["餐饮美食","洗浴住宿","观影k哥"],array1:["正常营业","休息中","已关店"],array_index:0,activeColor:"#0faeff",styleType:"button",uploaddata:{},uploaddata_id:{},text_info:{},latitude:null,longitude:null,covers_markers:[{latitude:null,longitude:null}],mapCtx:null,id_image_ist:[]}},onShow:function(){this.getData()},onLoad:function(t){},methods:{markertapFn:function(){console.log("markertapFn。。。。。。。markertapFn")},mapTapFn:function(e,i){var n=this;if(console.log("引动了。。。。。。。111",JSON.stringify(e),JSON.stringify(i)),1!=n.text_info.status){var o=t.createMapContext("myMap",n);o.getCenterLocation({success:function(t){console.log("getcenter------",JSON.stringify(t)),n.covers_markers[0].latitude=t.latitude,n.covers_markers[0].longitude=t.longitude,n.text_info.latitude=t.latitude,n.text_info.longitude=t.longitude,console.log("covers_markers------",JSON.stringify(n.covers_markers))},fail:function(t,e){console.log("fail"+JSON.stringify(t))}})}},selectcity:function(){this.show_flag=!1,this.$refs.mpvueCityPicker.show()},onConfirm:function(t){this.show_flag=!0,console.log(JSON.stringify(t));var e=t.label.split("-");this.text_info.province_name=e[0],this.text_info.city_name=e[1],this.text_info.district_name=e[2],this.text_info.province_id=t.provinceCode,this.text_info.city_id=t.cityCode,this.text_info.district_id=t.districtCode},onCancel:function(t){this.show_flag=!0,console.log(t)},getData:function(){var e=this;this.$util.ajax_uni({url:"merchants/index/show",data:{ff_openid:t.getStorageSync("user_id")},success:function(i){console.log("返回店铺信息res:",i),1==i.data.status?(e.text_info=i.data.data.data,e.covers_markers[0].latitude=e.text_info.latitude,e.covers_markers[0].longitude=e.text_info.longitude):(console.log("ceeee",JSON.stringify(i.data)),t.showToast({icon:"none",title:i.data.msg}))},error:function(t){console.log("错误res:",t)}})},nextStepsFn:function(){console.log("active--",this.active,"current===",this.current),t.navigateTo({url:"shop_info_edit3"})},preStepsFn:function(){console.log("active--",this.active,"current===",this.current),t.navigateBack()},bindPickerChange1:function(t){console.log("picker发送选择改变，携带值为",t.target.value),this.text_info.store_status=t.target.value},catChange:function(t){console.log("picker发送选择改变，携带值为",t.target.value),this.cat_index=t.target.value,this.text_info.cat_id=this.storeListAll[t.target.value].id},onClickItem:function(t){this.current!==t&&(this.current=t)},formReset:function(t){console.log("清空数据"),this.chosen=""},choseLocation:function(){var e=this;console.log("位置名称：--------"),t.chooseLocation({success:function(t){console.log("位置名称："+t.name),console.log("详细地址："+t.address),console.log("纬度："+t.latitude),console.log("经度："+t.longitude),e.text_info.address=t.name,e.text_info.longitude=t.longitude,e.text_info.latitude=t.latitude,e.covers_markers.pop(),e.covers_markers.push({latitude:t.latitude,longitude:t.longitude,label:{content:t.name}})}})},getLocation:function(){var e=this;t.getLocation({type:"gcj02",success:function(t){console.log("当前位置的纬度："+t.latitude),e.longitude=t.longitude,e.latitude=t.latitude,e.covers_markers.push({latitude:t.latitude,longitude:t.longitude})},fail:function(t){console.log("res-fail",t)}})},formSubmit:function(e){var i="";i=1==this.text_info.status?"merchants/index/updateRegistered":"merchants/index/updateReg",console.log("入参---修改",JSON.stringify(this.text_info)),this.$util.ajax_uni({url:i,data:this.text_info,success:function(e){console.log("修改--返回---es:",e),1==e.data.status?t.navigateTo({url:"./shop_info_edit3"}):(console.log("ceeee",JSON.stringify(e.data)),t.showToast({icon:"none",title:e.data.msg}))},error:function(t){console.log("错误res:",t)}})}}};e.default=a}).call(this,i("649d")["default"])},"7d92":function(t,e,i){"use strict";i("7297");var n=a(i("b0ce")),o=a(i("a220"));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,n.default)(o.default))},a220:function(t,e,i){"use strict";i.r(e);var n=i("a452"),o=i("056f");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("b9f1");var s=i("2877"),r=Object(s["a"])(o["default"],n["a"],n["b"],!1,null,"6ddb0a25",null);e["default"]=r.exports},a452:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content",staticStyle:{"background-color":"#fff"}},[1!=t.text_info.status?i("view",{staticStyle:{"margin-bottom":"80rpx"}},[i("van-steps",{attrs:{steps:t.steps,active:t.active,mpcomid:"6d461f1f-0"}}),i("view",{staticClass:"iconWrap",attrs:{eventid:"6d461f1f-0"},on:{tap:t.choseLocation}},[i("uni-icon",{attrs:{type:"search",size:"30",mpcomid:"6d461f1f-1"}}),t._v("搜索")],1)],1):t._e(),1==t.text_info.status?i("view",[i("van-steps",{attrs:{steps:t.steps,active:t.active,mpcomid:"6d461f1f-2"}})],1):t._e(),i("form",{attrs:{eventid:"6d461f1f-5"},on:{submit:t.formSubmit,reset:t.formReset}},[i("view",{staticClass:"mapWrap"},[i("map",{attrs:{id:"myMap",latitude:t.text_info.latitude,longitude:t.text_info.longitude,markers:t.covers_markers,scale:"14","show-location":"",hidden:!t.show_flag,eventid:"6d461f1f-1"},on:{tap:t.mapTapFn,markertap:t.markertapFn}}),i("view",{staticStyle:{height:"600rpx",width:"100%","background-color":"#FFFFFF"},attrs:{hidden:t.show_flag}}),i("view",{staticClass:"infoWarp"},[1==t.text_info.status?i("view",{staticClass:"uni-title",staticStyle:{"margin-top":"80rpx"}},[t._v("店铺地址")]):t._e(),1!=t.text_info.status?i("view",[t._v("店铺地址")]):t._e(),1!=t.text_info.status?i("view",{staticStyle:{display:"flex","justify-content":"space-between"}},[t._v("省/市/区"),i("view",{attrs:{eventid:"6d461f1f-2"},on:{click:t.selectcity}},[i("view",[t._v(t._s(t.text_info.province_name)+" "+t._s(t.text_info.city_name)+" "+t._s(t.text_info.district_name))])])]):t._e(),1!=t.text_info.status?i("view",{},[t._v("详细地址"),i("view",{},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text_info.address,expression:"text_info.address"}],staticStyle:{height:"120rpx"},attrs:{name:"address",maxlength:"200",eventid:"6d461f1f-3"},domProps:{value:t.text_info.address},on:{input:function(e){e.target.composing||(t.text_info.address=e.target.value)}}})])]):t._e(),1==t.text_info.status?i("view",{},[t._v(t._s(t.text_info.province_name)+t._s(t.text_info.city_name)+t._s(t.text_info.district_name)+t._s(t.text_info.address))]):t._e()])],1),i("view",{staticClass:"infoWarp"},[i("view",{staticClass:"uni-title"},[t._v("店铺介绍")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text_info.info,expression:"text_info.info"}],staticStyle:{color:"#555",width:"auto"},attrs:{name:"info",placeholder:"请输入",eventid:"6d461f1f-4"},domProps:{value:t.text_info.info},on:{input:function(e){e.target.composing||(t.text_info.info=e.target.value)}}})])]),i("view",{staticClass:"uni-btn-v"},[i("button",{staticClass:"btn-submit",attrs:{type:"primary",eventid:"6d461f1f-6"},on:{tap:t.formSubmit}},[t._v("确定并下一步")])],1),i("mpvue-city-picker",{ref:"mpvueCityPicker",attrs:{themeColor:"#007AFF",eventid:"6d461f1f-7",mpcomid:"6d461f1f-3"},on:{onCancel:t.onCancel,onConfirm:t.onConfirm}})],1)},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},b9f1:function(t,e,i){"use strict";var n=i("59f5"),o=i.n(n);o.a}},[["7d92","common/runtime","common/vendor"]]]);