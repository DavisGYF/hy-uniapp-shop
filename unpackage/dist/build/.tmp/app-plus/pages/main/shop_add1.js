(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/shop_add1"],{"1c23":function(t,i,e){"use strict";e.r(i);var s=e("2cb6"),a=e.n(s);for(var n in s)"default"!==n&&function(t){e.d(i,t,function(){return s[t]})}(n);i["default"]=a.a},"2cb6":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=a(e("a34a"));a(e("3650"));function a(t){return t&&t.__esModule?t:{default:t}}function n(t,i,e,s,a,n,h){try{var o=t[n](h),c=o.value}catch(l){return void e(l)}o.done?i(c):Promise.resolve(c).then(s,a)}function h(t){return function(){var i=this,e=arguments;return new Promise(function(s,a){var h=t.apply(i,e);function o(t){n(h,s,a,o,c,"next",t)}function c(t){n(h,s,a,o,c,"throw",t)}o(void 0)})}}var o=e("7389"),c={data:function(){return{cat_index:0,storeListAll:[],storeList:[],store_status_arr:["休息中","正常营业","已关店"],storeList1:["餐饮美食","洗浴住宿","唱歌观影"],shop_info:{avatar:"",cat_id:10,store_status:0,label:"1"},imageList:[],uploaddata:{}}},onShow:function(){console.log("this.$store.state ee===",this.$store.state),this.$store.state.form_data1.store_name&&(this.shop_info=this.$store.state.form_data1)},onLoad:function(){this.getStore(),this.getOssParam()},methods:{getStore:function(){var i=this;this.$util.ajax_uni({url:"merchants/index/cat",data:{},success:function(e){if(1==e.data.status){i.shop_info.cat_id=e.data.data[0].id,i.storeListAll=e.data.data;var s=!0,a=!1,n=void 0;try{for(var h,o=e.data.data[Symbol.iterator]();!(s=(h=o.next()).done);s=!0){var c=h.value;c.value=c.id,i.storeList.push(c.name)}}catch(l){a=!0,n=l}finally{try{s||null==o.return||o.return()}finally{if(a)throw n}}}else console.log("ceeee",JSON.stringify(e.data)),t.showToast({icon:"none",title:e.data.msg})},error:function(t){console.log("错误res:",t)}})},catChange:function(t){this.cat_index=t.target.value,this.shop_info.cat_id=this.storeListAll[t.target.value].id},storeStatusChange:function(t){console.log("picker发送选择改变，携带值为",t.target.value),this.shop_info.store_status=t.target.value},countChange:function(t){this.countIndex=t.target.value},chooseImageFn:function(){var i=h(s.default.mark(function i(e){var a,n=this;return s.default.wrap(function(i){while(1)switch(i.prev=i.next){case 0:a=this,1==e?t.chooseImage({count:1,success:function(t){console.log("res----",t),n.shop_info.avatar=t.tempFilePaths[0]}}):t.chooseImage({count:1,success:function(i){var e=i.tempFilePaths;console.log("res?-=======",JSON.stringify(i));var s=a.uploaddata.dir+Date.parse(new Date)+"_"+a.randomString(6)+"."+e[0].split(".").pop();t.uploadFile({url:"https://ffomall.oss-cn-hangzhou.aliyuncs.com",filePath:e[0],name:"file",formData:{key:s,policy:a.uploaddata.policy,OSSAccessKeyId:a.uploaddata.OSSAccessKeyId,callback:a.uploaddata.callback,signature:a.uploaddata.signature,success_action_status:"203"},success:function(t){console.log("uploadImage success, res is:",t.data),a.shop_info.avatar="https://ffomall.oss-cn-hangzhou.aliyuncs.com/"+JSON.parse(t.data).filename,console.log("uploadImage ======:",JSON.stringify(a.shop_info.avatar))},fail:function(i){console.log("uploadImage fail",JSON.stringify(i)),t.showModal({content:i.errMsg,showCancel:!1}),t.hideLoading()},complete:function(){console.log("complate")}})}});case 2:case"end":return i.stop()}},i,this)}));function e(t){return i.apply(this,arguments)}return e}(),randomString:function(t,i){i=i||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var e="",s=0;s<t;s++){var a=Math.floor(Math.random()*i.length);e+=i.substring(a,a+1)}return e},getOssParam:function(){var i=this;t.request({url:this.base_url+"notify/alioss/getsign",method:"post",data:{sign:"3521257fc593c5d202474f6ac0c245ae"},success:function(t){console.log("res?-",t),1==t.data.status&&(i.uploaddata=t.data.data)},fail:function(){},complete:function(){}})},formReset:function(t){console.log("清空数据"),this.chosen=""},isFullImg:function(){var i=this;return new Promise(function(e){t.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(t){t.confirm?(i.imageList=[],e(!0)):e(!1)},fail:function(){e(!1)}})})},previewImage:function(i,e){t.previewImage({urls:[this.shop_info.avatar]})},formSubmit:function(i){console.log("ruacna----",JSON.stringify(this.shop_info));var e=[{name:"store_name",checkType:"notnull",checkRule:"",errorMsg:"店铺名称不能空"},{name:"id_name",checkType:"notnull",checkRule:"",errorMsg:"联系人不能空"},{name:"store_tel",checkType:"notnull",checkRule:"",errorMsg:"联系电话不能空"}],s=i.detail.value,a=o.check(s,e);if(a){if(""==this.shop_info.avatar)return t.showToast({title:"店铺logo必填!",icon:"none"}),!1;this.$store.commit("changeFormData1",this.shop_info),console.log("kankanjinqumei",this.$store.state),t.navigateTo({url:"./shop_add2"})}else t.showToast({title:o.error,icon:"none"})}}};i.default=c}).call(this,e("649d")["default"])},3650:function(t,i,e){"use strict";
/*!
               * image-process v0.0.1
               * (c) 2017-2017 dailc
               * Released under the MIT License.
               * https://github.com/dailc/image-process
               */
/*!
               * image-process v0.0.1
               * (c) 2017-2017 dailc
               * Released under the MIT License.
               * https://github.com/dailc/image-process
               */
(function(i,e){t.exports=e()})(0,function(){function t(t){for(var i=t,e=arguments.length,s=Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];return s.forEach(function(t){t&&Object.keys(t).forEach(function(e){i[e]=t[e]})}),i}function i(t){var i=t;return"string"===typeof i&&(i=document.querySelector(i)),i}function e(t){var i=t,e=function(t){this.os={};var i=t.match(/(iPhone\sOS)\s([\d_]+)/);i&&(this.os.ios=!0,this.os.iphone=!0,this.os.version=i[2].replace(/_/g,"."));var e=t.match(/(iPad).*OS\s([\d_]+)/);e&&(this.os.ios=!0,this.os.ipad=!0,this.os.version=e[2].replace(/_/g,"."));var s=t.match(/QuickHybrid/i);s&&(this.os.quick=!0);var a=t.match(/EpointEJS/i);a&&(this.os.ejs=!0);var n=t.match(/DingTalk/i);n&&(this.os.dd=!0),a||n||s||(this.os.h5=!0)};e.call(i,"")}var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();function a(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var n={container:"#imgclip",img:null,isSmooth:!0,captureRadius:30,minMoveDiff:1,quality:.92,mime:"image/jpeg",maxCssHeight:0,sizeTipsStyle:0,compressScaleRatio:1,iphoneFixedRatio:2,isUseOriginSize:!1,maxWidth:0,forceWidth:0,forceHeight:0},h=function(){function h(s){a(this,h),e(this),this.options=t({},n,s),this.container=i(this.options.container),this.img=this.options.img,this.domChildren=[],this.events={},this.initCanvas(),this.initClip(),this.initMagnifier(),this.initTransferCanvas(),this.resetClipRect()}return s(h,[{key:"getPixelRatio",value:function(t){var i=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,e=1/i;return e*=this.options.compressScaleRatio||1,this.os.ios&&this.os.iphone&&(e*=this.options.iphoneFixedRatio||1),e}},{key:"clear",value:function(){for(var t=this.domChildren&&this.domChildren.length||0,i=0;i<t;i+=1)this.container.removeChild(this.domChildren[i]);this.domChildren=null;for(var e=Object.keys(this.events||{}),s=e&&e.length||0,a=0;a<s;a+=1)this.container.removeEventListener(e[a],this.events[e[a]]);this.events=null}},{key:"initCanvas",value:function(){this.canvasFull=document.createElement("canvas"),this.ctxFull=this.canvasFull.getContext("2d"),this.canvasFull.className="clip-canvas-full",this.smoothCtx(this.ctxFull),this.RATIO_PIXEL=this.getPixelRatio(this.ctxFull);var t=this.img.width/this.img.height,i=this.container.offsetWidth||"";this.oldWidth=i,this.oldHeight=i/t,this.resizeCanvas(i,this.oldHeight),this.container.appendChild(this.canvasFull),this.domChildren.push(this.canvasFull)}},{key:"resizeCanvas",value:function(t,i){var e=this.options.maxCssHeight,s=t/i,a=this.oldWidth,n=a/s;e&&n>e&&(n=e,a=n*s),this.marginLeft=(this.oldWidth-a)/2,this.canvasFull.style.width=a+"px",this.canvasFull.style.height=n+"px",this.canvasFull.style.marginLeft=this.marginLeft+"px",this.canvasFull.width=a*this.RATIO_PIXEL,this.canvasFull.height=n*this.RATIO_PIXEL,1&this.rotateStep?this.scale=this.canvasFull.width/this.img.height:this.scale=this.canvasFull.width/this.img.width}},{key:"initClip",value:function(){var t=document.createElement("div");t.className="clip-rect",this.clipRect=t,this.container.appendChild(this.clipRect),this.domChildren.push(this.clipRect);var i=document.createElement("span");i.className="clip-tips",this.clipRect.appendChild(i),this.clipTips=i,-1!==this.options.sizeTipsStyle&&0!==this.options.sizeTipsStyle||this.clipTips.classList.add("clip-hidden"),this.clipRectHorns=[];for(var e=0;e<8;e+=1){var s=document.createElement("span");s.className="clip-rect-horn ",0===e?s.className+="horn-nw":1===e?s.className+="horn-ne":2===e?s.className+="horn-sw":3===e?s.className+="horn-se":4===e?s.className+="horn-n":5===e?s.className+="horn-s":6===e?s.className+="horn-w":7===e&&(s.className+="horn-e"),this.clipRect.appendChild(s),this.clipRectHorns.push(s)}this.resizeClip()}},{key:"resizeClip",value:function(){this.listenerHornsResize(),this.listenerRectMove(),this.listenerContainerLeave()}},{key:"listenerHornsResize",value:function(){var t=this;this.clipEventState={};var i=function(i){t.clipEventState.width=t.clipRect.offsetWidth,t.clipEventState.height=t.clipRect.offsetHeight,t.clipEventState.left=t.clipRect.offsetLeft-t.marginLeft,t.clipEventState.top=t.clipRect.offsetTop,t.clipEventState.mouseX=i.touches?i.touches[0].pageX:i.pageX,t.clipEventState.mouseY=i.touches?i.touches[0].pageY:i.pageY,t.clipEventState.evnt=i},e=function(i,e){var s=e-t.canvasFull.offsetTop-t.container.offsetTop,a=i-t.canvasFull.offsetLeft-t.container.offsetLeft;return s=Math.min(s,t.canvasFull.offsetHeight),s=Math.max(0,s),a=Math.min(a,t.canvasFull.offsetWidth),a=Math.max(0,a),t.curX=a,t.curY=s,{curX:a,curY:s}};this.getCurXY=e;var s=function(i){if(t.canResizing){i.preventDefault(),i.stopPropagation();var s=t.clipEventState,a=s.evnt.target,n=i.touches?i.touches[0].pageY:i.pageY,h=i.touches?i.touches[0].pageX:i.pageX,o=e(h,n),c=o.curX,l=o.curY,r=void 0,u=void 0,v=void 0,d=void 0;a.classList.contains("horn-nw")?(r=s.width-(c-s.left),u=s.height-(l-s.top),v=c,d=l):a.classList.contains("horn-ne")?(r=c-s.left,u=s.height-(l-s.top),v=s.left,d=l):a.classList.contains("horn-sw")?(r=s.width-(c-s.left),u=l-s.top,v=c,d=s.top):a.classList.contains("horn-se")?(r=c-s.left,u=l-s.top,v=s.left,d=s.top):a.classList.contains("horn-n")?(r=s.width,u=s.height-(l-s.top),v=s.left,d=l):a.classList.contains("horn-s")?(r=s.width,u=l-s.top,v=s.left,d=s.top):a.classList.contains("horn-w")?(r=s.width-(c-s.left),u=s.height,v=c,d=s.top):a.classList.contains("horn-e")&&(r=c-s.left,u=s.height,v=c-r,d=s.top),t.clipRect.style.left=v+t.marginLeft+"px",t.clipRect.style.top=d+"px",t.clipRect.style.width=r+"px",t.clipRect.style.height=u+"px",t.draw()}};this.container.addEventListener("touchmove",s),this.container.addEventListener("mousemove",s),this.events.touchmove=s,this.events.mousemove=s;var a=function(e){t.canResizing=!0,t.canvasMag.classList.remove("clip-hidden"),0===t.options.sizeTipsStyle&&t.clipTips.classList.remove("clip-hidden"),i(e)},n=function(){t.canResizing=!1,t.canvasMag.classList.add("clip-hidden"),0===t.options.sizeTipsStyle&&t.clipTips.classList.add("clip-hidden")};this.endHronsResize=n;for(var h=0;h<8;h+=1)this.clipRectHorns[h].addEventListener("mousedown",a),this.clipRectHorns[h].addEventListener("touchstart",a),this.clipRectHorns[h].addEventListener("mouseup",n),this.clipRectHorns[h].addEventListener("touchend",n)}},{key:"listenerRectMove",value:function(){var t=this,i=this.clipRect,e=function(e){if(!t.canResizing&&t.canMove){e.preventDefault(),e.stopPropagation();var s=t.options.minMoveDiff,a=e.touches?e.touches[0].pageY:e.pageY,n=e.touches?e.touches[0].pageX:e.pageX,h=n-t.prevRectMouseX,o=a-t.prevRectMouseY;if(h||o){(Math.abs(h)>s||Math.abs(o)>s)&&(t.prevRectMouseX=n,t.prevRectMouseY=a);var c=i.offsetTop+o,l=i.offsetLeft+h;c<0?c=0:c>t.canvasFull.offsetHeight-i.offsetHeight&&(c=t.canvasFull.offsetHeight-i.offsetHeight),l<t.marginLeft?l=t.marginLeft:l>t.canvasFull.offsetWidth-i.offsetWidth+t.marginLeft&&(l=t.canvasFull.offsetWidth-i.offsetWidth+t.marginLeft),t.clipRect.style.left=l+"px",t.clipRect.style.top=c+"px",t.draw()}}};i.addEventListener("touchmove",e),i.addEventListener("mousemove",e);var s=function(i){t.canMove=!0;var e=i.touches?i.touches[0].pageY:i.pageY,s=i.touches?i.touches[0].pageX:i.pageX;t.prevRectMouseX=s,t.prevRectMouseY=e},a=function(){t.canMove=!1};this.endRectMove=a,i.addEventListener("mousedown",s),i.addEventListener("touchstart",s),i.addEventListener("mouseup",a),i.addEventListener("touchend",a)}},{key:"listenerContainerLeave",value:function(){var t=this,i=function(){t.canResizing&&t.endHronsResize(),t.canMove&&t.endRectMove()};this.container.addEventListener("mouseleave",i),this.container.addEventListener("mouseup",i),this.events.mouseleave=i,this.events.mouseup=i}},{key:"draw",value:function(){this.drawMag();var t=this.getRealFinalImgSize(this.clipRect.offsetWidth*this.RATIO_PIXEL,this.clipRect.offsetHeight*this.RATIO_PIXEL),i=t.width,e=t.height;this.clipTips.innerText=i.toFixed(0)+"*"+e.toFixed(0),this.ctxFull.save(),1&this.rotateStep?this.ctxFull.clearRect(0,0,this.canvasFull.height,this.canvasFull.width):this.ctxFull.clearRect(0,0,this.canvasFull.width,this.canvasFull.height),this.drawImage(),this.drawMask(),this.ctxFull.beginPath();var s=this.getClipRectParams(),a=s.srcX,n=s.srcY,h=s.sWidth,o=s.sHeight;this.ctxFull.rect(a,n,h,o),this.ctxFull.clip(),this.drawImage(),this.ctxFull.restore()}},{key:"getClipRectParams",value:function(){var t=this.clipRect.offsetTop,i=this.clipRect.offsetLeft-this.marginLeft,e=this.clipRect.offsetWidth,s=this.clipRect.offsetHeight,a=i+e,n=t+s,h=i,o=t,c=e,l=s;return 1===this.rotateStep?(h=t,o=this.canvasFull.offsetWidth-a,c=s,l=e):2===this.rotateStep?(h=this.canvasFull.offsetWidth-a,o=this.canvasFull.offsetHeight-n,c=e,l=s):3===this.rotateStep&&(h=this.canvasFull.offsetHeight-n,o=i,c=s,l=e),h*=this.RATIO_PIXEL,o*=this.RATIO_PIXEL,c*=this.RATIO_PIXEL,l*=this.RATIO_PIXEL,{srcX:h,srcY:o,sWidth:c,sHeight:l}}},{key:"getRealCoordinate",value:function(t,i){var e=t,s=i;return 1===this.rotateStep?(e=i,s=this.canvasFull.offsetWidth-t):2===this.rotateStep?(e=this.canvasFull.offsetWidth-t,s=this.canvasFull.offsetHeight-i):3===this.rotateStep&&(e=this.canvasFull.offsetHeight-i,s=t),e*=this.RATIO_PIXEL,s*=this.RATIO_PIXEL,{x:e,y:s}}},{key:"drawImage",value:function(){1&this.rotateStep?this.ctxFull.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.canvasFull.height,this.canvasFull.width):this.ctxFull.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.canvasFull.width,this.canvasFull.height)}},{key:"drawMask",value:function(){this.ctxFull.save(),this.ctxFull.fillStyle="rgba(0, 0, 0, 0.3)",1&this.rotateStep?this.ctxFull.fillRect(0,0,this.canvasFull.height,this.canvasFull.width):this.ctxFull.fillRect(0,0,this.canvasFull.width,this.canvasFull.height),this.ctxFull.restore()}},{key:"drawMag",value:function(){var t=this.options.captureRadius,i=this.getRealCoordinate(this.curX,this.curY),e=2*t,s=2*t,a=i.x-t,n=i.y-t;1&this.rotateStep?this.ctxMag.clearRect(0,0,this.canvasMag.height,this.canvasMag.width):this.ctxMag.clearRect(0,0,this.canvasMag.width,this.canvasMag.height);var h=0,o=0;this.os.ios&&(n<0&&(o=this.canvasMag.height/2*Math.abs(n/t),n=0),a<0&&(h=this.canvasMag.width/2*Math.abs(a/t),a=0)),this.ctxMag.drawImage(this.img,a/this.scale,n/this.scale,e/this.scale,s/this.scale,h,o,this.canvasMag.width,this.canvasMag.height);var c=this.canvasMag.width/2,l=this.canvasMag.height/2,r=5*this.RATIO_PIXEL;this.ctxMag.beginPath(),this.ctxMag.moveTo(c-r,l),this.ctxMag.lineTo(c+r,l),this.ctxMag.moveTo(c,l-r),this.ctxMag.lineTo(c,l+r),this.ctxMag.strokeStyle="#de3c50",this.ctxMag.lineWidth=3,this.ctxMag.stroke()}},{key:"initMagnifier",value:function(){this.canvasMag=document.createElement("canvas"),this.canvasMag.className="magnifier clip-hidden",this.ctxMag=this.canvasMag.getContext("2d"),this.smoothCtx(this.ctxMag),this.container.appendChild(this.canvasMag),this.domChildren.push(this.canvasMag),this.canvasMag.width=2*this.options.captureRadius*this.RATIO_PIXEL,this.canvasMag.height=2*this.options.captureRadius*this.RATIO_PIXEL}},{key:"initTransferCanvas",value:function(){this.canvasTransfer=document.createElement("canvas"),this.canvasTransfer.style.display="none",this.canvasTransfer.className="transfer-canvas",this.ctxTransfer=this.canvasTransfer.getContext("2d"),this.smoothCtx(this.ctxTransfer),this.container.appendChild(this.canvasTransfer),this.domChildren.push(this.canvasTransfer)}},{key:"smoothCtx",value:function(t){var i=this.options.isSmooth;t.mozImageSmoothingEnabled=i,t.webkitImageSmoothingEnabled=i,t.msImageSmoothingEnabled=i,t.imageSmoothingEnabled=i}},{key:"getRealFinalImgSize",value:function(t,i){var e=this.canvasFull.width/this.canvasFull.height,s=this.options.maxWidth||0,a=this.options.forceWidth||0,n=this.options.forceHeight||0,h=t,o=i;return 1&this.rotateStep?((this.options.isUseOriginSize||this.canvasFull.width>this.img.height)&&(h=this.img.width*t/this.canvasFull.height,o=this.img.height*i/this.canvasFull.width),s&&this.canvasFull.height>s&&s<this.img.height&&(h=s*t/this.canvasFull.height,o=s/e*i/this.canvasFull.width),a&&(h=a*t/this.canvasFull.height,o=(n||a/e)*i/this.canvasFull.width)):((this.options.isUseOriginSize||this.canvasFull.width>this.img.width)&&(h=this.img.width*t/this.canvasFull.width,o=this.img.height*i/this.canvasFull.height),s&&this.canvasFull.width>s&&s<this.img.width&&(h=s*t/this.canvasFull.width,o=s/e*i/this.canvasFull.height),a&&(h=a*t/this.canvasFull.width,o=(n||a/e)*i/this.canvasFull.height)),{width:h,height:o}}},{key:"clip",value:function(){var t=this.getClipRectParams(),i=t.srcX,e=t.srcY,s=t.sWidth,a=t.sHeight,n=this.getRealFinalImgSize(s,a),h=n.width,o=n.height;this.rotateStep=this.rotateStep||0;var c=90*this.rotateStep*Math.PI/180;0===this.rotateStep?(this.canvasTransfer.width=h,this.canvasTransfer.height=o):1===this.rotateStep?(this.canvasTransfer.width=o,this.canvasTransfer.height=h,this.ctxTransfer.rotate(c),this.ctxTransfer.translate(0,-this.canvasTransfer.width)):2===this.rotateStep?(this.canvasTransfer.width=h,this.canvasTransfer.height=o,this.ctxTransfer.rotate(c),this.ctxTransfer.translate(-this.canvasTransfer.width,-this.canvasTransfer.height)):3===this.rotateStep&&(this.canvasTransfer.width=o,this.canvasTransfer.height=h,this.ctxTransfer.rotate(c),this.ctxTransfer.translate(-this.canvasTransfer.height,0)),1&this.rotateStep?this.ctxTransfer.drawImage(this.img,i/this.scale,e/this.scale,s/this.scale,a/this.scale,0,0,this.canvasTransfer.height,this.canvasTransfer.width):this.ctxTransfer.drawImage(this.img,i/this.scale,e/this.scale,s/this.scale,a/this.scale,0,0,this.canvasTransfer.width,this.canvasTransfer.height),this.clipImgData=this.canvasTransfer.toDataURL(this.options.mime,this.options.quality)}},{key:"resetClipRect",value:function(){this.clipRect.style.left=(this.marginLeft||0)+"px",this.clipRect.style.top=0,this.clipRect.style.width=this.canvasFull.width/this.RATIO_PIXEL+"px",this.clipRect.style.height=this.canvasFull.height/this.RATIO_PIXEL+"px",this.draw()}},{key:"getClipImgData",value:function(){return this.clipImgData}},{key:"rotate",value:function(t){var i=0,e=3,s=this.oldWidth,a=this.oldHeight;this.rotateStep=this.rotateStep||0,this.rotateStep+=t?1:-1,this.rotateStep>e?this.rotateStep=i:this.rotateStep<i&&(this.rotateStep=e);var n=90*this.rotateStep*Math.PI/180;this.canvasMag.width=this.canvasMag.width,this.canvasMag.height=this.canvasMag.height,0===this.rotateStep?this.resizeCanvas(s,a):1===this.rotateStep?(this.resizeCanvas(a,s),this.ctxFull.rotate(n),this.ctxFull.translate(0,-this.canvasFull.width),this.ctxMag.rotate(n),this.ctxMag.translate(0,-this.canvasMag.width)):2===this.rotateStep?(this.resizeCanvas(s,a),this.ctxFull.rotate(n),this.ctxFull.translate(-this.canvasFull.width,-this.canvasFull.height),this.ctxMag.rotate(n),this.ctxMag.translate(-this.canvasMag.width,-this.canvasMag.height)):3===this.rotateStep&&(this.resizeCanvas(a,s),this.ctxFull.rotate(n),this.ctxFull.translate(-this.canvasFull.height,0),this.ctxMag.rotate(n),this.ctxMag.translate(-this.canvasMag.height,0)),this.resetClipRect()}},{key:"destroy",value:function(){this.clear(),this.canvasFull=null,this.ctxFull=null,this.canvasTransfer=null,this.ctxTransfer=null,this.canvasMag=null,this.ctxMag=null,this.clipRect=null}}]),h}();return h})},"4df3":function(t,i,e){"use strict";e("7297");var s=n(e("b0ce")),a=n(e("d0fd"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(a.default))},"85b0":function(t,i,e){"use strict";var s=e("dcfd"),a=e.n(s);a.a},a124:function(t,i,e){"use strict";var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("view",{staticClass:"content"},[e("form",{attrs:{eventid:"7179e038-6"},on:{submit:t.formSubmit,reset:t.formReset}},[e("view",{staticClass:"uni-list"},[e("view",{staticClass:"uni-list-cell"},[t._v("店铺名称"),e("view",{},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.shop_info.store_name,expression:"shop_info.store_name"}],staticClass:"uni-input",attrs:{name:"store_name",placeholder:"请输入",eventid:"7179e038-0"},domProps:{value:t.shop_info.store_name},on:{input:function(i){i.target.composing||(t.shop_info.store_name=i.target.value)}}})])]),e("view",{staticClass:"uni-list-cell"},[t._v("联系人"),e("view",{staticClass:"uni-list-cell-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.shop_info.id_name,expression:"shop_info.id_name"}],staticClass:"uni-input",attrs:{name:"id_name",placeholder:"请输入",eventid:"7179e038-1"},domProps:{value:t.shop_info.id_name},on:{input:function(i){i.target.composing||(t.shop_info.id_name=i.target.value)}}})])]),e("view",{staticClass:"uni-list-cell"},[t._v("联系电话"),e("view",{staticClass:"uni-list-cell-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.shop_info.store_tel,expression:"shop_info.store_tel"}],staticClass:"uni-input",attrs:{type:"number",name:"store_tel",placeholder:"请输入",eventid:"7179e038-2"},domProps:{value:t.shop_info.store_tel},on:{input:function(i){i.target.composing||(t.shop_info.store_tel=i.target.value)}}})])]),e("view",{staticClass:"uni-list-cell"},[t._v("所属行业"),e("view",{},[e("picker",{attrs:{value:t.cat_index,range:t.storeList,eventid:"7179e038-3"},on:{change:t.catChange}},[e("view",{staticClass:"uni-input"},[t._v(t._s(t.storeList[t.cat_index]))])])],1)]),e("view",{staticClass:"uni-list-cell",staticStyle:{"flex-direction":"column","align-items":"flex-start"}},[e("view",{},[t._v("店铺logo")]),e("view",{staticStyle:{width:"400rpx",display:"flex"}},[t.shop_info.avatar?[e("view",{staticClass:"uni-uploader__file",staticStyle:{width:"200rpx"}},[e("image",{staticClass:"uni-uploader__img",attrs:{mode:"aspectFill",src:t.shop_info.avatar,"data-src":t.shop_info.avatar,eventid:"7179e038-4"},on:{tap:function(i){t.previewImage(1)}}})])]:t._e(),e("view",{staticClass:"uni-uploader__input-box",staticStyle:{width:"200rpx"}},[e("view",{staticClass:"uni-uploader__input",attrs:{eventid:"7179e038-5"},on:{tap:function(i){t.chooseImageFn(2)}}})])],2)])]),e("view",{staticClass:"uni-btn-v"},[e("button",{staticClass:"btn-submit",attrs:{formType:"submit",type:"primary"}},[t._v("下一步")])],1)])],1)},a=[];e.d(i,"a",function(){return s}),e.d(i,"b",function(){return a})},d0fd:function(t,i,e){"use strict";e.r(i);var s=e("a124"),a=e("1c23");for(var n in a)"default"!==n&&function(t){e.d(i,t,function(){return a[t]})}(n);e("85b0");var h=e("2877"),o=Object(h["a"])(a["default"],s["a"],s["b"],!1,null,"7d75052e",null);i["default"]=o.exports},dcfd:function(t,i,e){}},[["4df3","common/runtime","common/vendor"]]]);